{"version":3,"sources":["../../../projects/lib/src/lib/popover/popover.token.ts","../../../projects/lib/src/lib/popover/models/popover-append-options.model.ts","../../../projects/lib/src/lib/popover/popover.animations.ts","../../../projects/lib/src/lib/popover/models/popover-styles.model.ts","../../../projects/lib/src/lib/popover/directives/popover-menu-item.directive.ts","../../../projects/lib/src/lib/popover/components/popover-menu/popover-menu.component.html","../../../projects/lib/src/lib/popover/components/popover-menu/popover-menu.component.ts","../../../projects/lib/src/lib/popover/models/popover-active.model.ts","../../../projects/lib/src/lib/layer/layer.model.ts","../../../projects/lib/src/lib/layer/layer.token.ts","../../../projects/lib/src/lib/layer/layer.component.ts","../../../projects/lib/src/lib/layer/layer.component.html","../../../projects/lib/src/lib/layer/layer.service.ts","../../../projects/lib/src/lib/popover/services/events.service.ts","../../../projects/lib/src/lib/popover/services/popover.service.ts","../../../projects/lib/src/lib/popover/components/popover-content/popover-content.component.html","../../../projects/lib/src/lib/popover/components/popover-content/popover-content.component.ts","../../../projects/lib/src/lib/layer/layer.module.ts","../../../node_modules/tslib/tslib.es6.js","../../../projects/lib/src/lib/popover/directives/base-popover.ts","../../../projects/lib/src/lib/popover/directives/popover.directive.ts","../../../projects/lib/src/lib/popover/directives/popover-chip.directive.ts","../../../projects/lib/src/lib/popover/directives/popover-chip-remove.directive.ts","../../../projects/lib/src/lib/popover/directives/popover-menu.directive.ts","../../../projects/lib/src/lib/popover/directives/popover-option.directive.ts","../../../projects/lib/src/lib/popover/directives/popover-remove-on-click.directive.ts","../../../projects/lib/src/lib/popover/directives/tooltip.directive.ts","../../../projects/lib/src/lib/popover/components/popover-select/popover-select.component.html","../../../projects/lib/src/lib/popover/components/popover-select/popover-select.component.ts","../../../projects/lib/src/lib/popover/popover.module.ts"],"names":["POPOVER_CONFIG","InjectionToken","PopoverAppendOptions","options","this","type","triggeredBy","closeOnScroll","undefined","delayClose","Number","isInteger","closeOnTriggerAgain","hideOnScroll","fadeInAnimation","trigger","state","style","transform","opacity","transition","animate","SPACE_FROM_TOP","POSITION_MEASURE_UNIT","PopoverStyles","popover","initHostElementWidth","hostElement","element","config","popoverConfig","position","prototype","init","_this","hostBounds","bounds","nativeElement","zIndex","setPositionStyle","top","height","isContextType","isSubmenuType","minWidth","width","triggerBounds","submenuTriggeredItem","getBoundingClientRect","canAssignPadding","padding","isTooltip","popoverWrapperEl","visibility","setTimeout","offsetWidth","update","setLeftPosition","setTopPosition","setWidth","windowHeight","window","innerHeight","elementHeight","triggerElement","triggerDirective","hostTopPosition","hostPosition","diff","windowWidth","innerWidth","elementWidth","left","defaultLeftPosition","hostRecBounds","right","hostElBounds","isMenuType","property","value","Object","defineProperty","content","PopoverMenuItemDirective","selected","hidden","clicked","EventEmitter","ngOnInit","clicked$","fromEvent","pipe","tap","emit","hovered$","ngAfterViewInit","classList","add","i0.ɵɵprojection","i0","ɵɵdirectiveInject","ElementRef","selectors","hostVars","hostBindings","rf","ctx","PopoverMenuComponent","contentQueries","dirIndex","TemplateRef","i0.ɵɵtemplate","ActivePopover","popoverRef","parentPopoverRef","superParentPopoverRef","directiveRef","deepLevel","isMenuParent","isSubmenu","isSuperparent","LayerAppendOptions","overlay","LAYER_CONFIG","LayerComponent","viewQuery","ViewContainerRef","i0.ɵɵelementContainer","LayerService","componentFactoryResolver","appRef","activeLayers","appendToBody","component","injector","componentRef","resolveComponentFactory","create","Injector","provide","useValue","changeDetectorRef","detectChanges","appendComponentFactory","appendComponentRef","instance","container","createComponent","push","ref","attachView","hostView","domElem","rootNodes","document","body","appendChild","removeFromBody","filter","layer","forEach","removeLayer","detachView","destroy","ɵɵinject","ComponentFactoryResolver","ApplicationRef","factory","ɵfac","providedIn","PopoverEventsService","ngZone","registeredEvents","register","activePopover","callback","sub","runOutsideAngular","obs","getEventObservable","subscribe","event","unregister","unsubscribe","_a","closed","e","merge","NgZone","PopoverService","layerService","eventsService","activePopovers","append","directive","existedPopover","find","remove","active","p","popoverComponentRef","afterClose","a","removeByNativeElementRef","location","getActive","isPopoverSubmenuExits","precendingRef","parentRef","precendingActivePopover","removeAllNestedPopovers","removeMenu","subscribeToClickOutsideEventForParentPopover","currentPopover","parentPopover_1","layerOptions","PopoverContentComponent","prepareSuperparentAndDeepLevel","superparent","newPopover","afterShow","canRegisterScrollCaptureEvent","registerScrollCaptureEvent","canRegisterResizeEvent","registerResizeEvent","parentPopover","parentPopover_2","contains","closestParent_1","popoverGroup","length","hideGroup","updateGroupPosition","captured","target","componentStyles","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","i0.ɵɵproperty","i0.ɵɵtext","i0.ɵɵtextInterpolate1","popoverService","popoverEventsService","cdr","animationState","animationEnd$","Subject","menuItemsChanged","destroy$","applyStyles","innerClass","listenForMouseEventOnHost","canListenForClickOutside","listenForClickOutside","menuRef","menuItems","listenForMenuItemTriggers","changes","takeUntil","next","ngOnDestroy","complete","templateRef","animationEnd","toState","onClickMenuItem","item","submenu","closeOnClickItem","close","onHoverMenuItem","canRemoveNestedSubmenus","hasItemNestedSubpopovers","createSubpopover","clickedElement","clickedOutside","enteredPopover","index","debounceTime","skipUntil","isMenu","providedValues","subMenuComponentRef","closeOnClickOutside","destroyed","ChangeDetectorRef","i0.ɵɵelementStart","i0.ɵɵlistener","$event","i0.ɵɵelementEnd","_r2","LayerModule","imports","CommonModule","declarations","extendStatics","d","b","setPrototypeOf","__proto__","Array","hasOwnProperty","call","__extends","__","constructor","__read","o","n","m","Symbol","iterator","r","i","ar","done","error","BasePopoverDirective","setOptions","appendToLayer","getPopoverComponentInjector","opts","assign","run","inputs","outputs","PopoverDirective","_super","poppyPopover","listenEventsForClickTrigger","listenEventsForHoverTrigger","open","canAppend","providerValues","popoverHovered","hostHovered","isMouseLeftBeforeDelayTimePast","switchMap","timer","isHostElementStillInDOM","take","exportAs","features","ɵɵInheritDefinitionFeature","template","PopoverChipDirective","PopoverChipRemoveDirective","selectComponentRef","onClick","closeChip","poppyChipRemove","PopoverSelectComponent","PopoverMenuDirective","poppyMenu","listenEventsForContextTrigger","updateContentPosition","getBounds","preventDefault","contextMenuPosition","clientY","clientX","PopoverOptionDirective","PopoverRemoveOnClickDirective","host","parentElement","closest","TooltipDirective","poppyTooltip","ɵɵpureFunction1","_c1","chip_r10","i0.ɵɵtextInterpolate","i0.ɵɵelement","option_r20","controlContainer","bindLabel","multiselect","clearable","searchable","placeholder","notFoundText","changed","selectedOptions","displayedOptions","displayedChips","asyncLoading","isMenuOpen","propagateChange","ngOnChanges","previousValue","currentValue","onOptionsChange","writeValue","onCloseMenu","async","loadAsyncOptions","firstLoad","onInputKeyUp","every","opt","updateSelectedItemsForMultiSelection","updateSelectedItemsForSingleSelection","reset","registerOnChange","fn","registerOnTouched","setDisabledState","isDisabled","getDisplayLabel","option","onClickItem","clickedOption","matchByValueOrReference","updateDisplayedChips","inputEl","emitChange","onChangeInput","includes","clear","stopPropagation","getDisplayValue","chip","arguments","concat","__spread","map","getPropagateValue","bindValue","searchPhrase","results","isArray","Error","v","findIndex","splice","comparedTo","i1","ControlContainer","NG_VALUE_ACCESSOR","useExisting","forwardRef","multi","NG_VALIDATORS","ɵɵNgOnChangesFeature","decls","vars","consts","PopoverModule","BrowserAnimationsModule","exports"],"mappings":"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","sourcesContent":["import { ElementRef, InjectionToken, TemplateRef } from '@angular/core';\n\nimport {\n  PopoverBounds,\n  PopoverMenu,\n  PopoverPosition,\n  PopoverTrigger,\n  PopoverType,\n} from './popover.interface';\nimport { BasePopoverDirective } from './directives/base-popover';\nimport { PopoverMenuItemDirective } from './directives/popover-menu-item.directive';\nimport { PopoverMenuComponent } from './components/popover-menu/popover-menu.component';\n\nexport const POPOVER_CONFIG = new InjectionToken<PopoverConfig>('popover-config');\n\nexport interface PopoverConfig {\n  bounds: PopoverBounds;\n  type: PopoverType;\n  triggerDirective?: BasePopoverDirective;\n  content?: TemplateRef<any> | string;\n  trigger?: PopoverTrigger;\n  triggerElement?: ElementRef;\n  menuItems?: PopoverMenu;\n  menuRef?: PopoverMenuComponent;\n  styles?: { [key: string]: number | string };\n  submenuTriggeredItem?: PopoverMenuItemDirective;\n  multiselect?: boolean;\n  closeOnClickOutside?: boolean;\n  closeOnClickItem?: boolean;\n  selectable?: boolean;\n  innerClass?: string;\n  position?: PopoverPosition;\n}\n","import { IPopoverAppendOptions, PopoverTrigger, PopoverType } from '../popover.interface';\n\nexport class PopoverAppendOptions {\n  type: PopoverType;\n  triggeredBy: PopoverTrigger;\n  closeOnScroll: boolean;\n  delayClose: number;\n  closeOnTriggerAgain: boolean;\n  hideOnScroll: boolean;\n\n  constructor(options: IPopoverAppendOptions) {\n    this.type = options.type;\n    this.triggeredBy = options.triggeredBy || 'click';\n    this.closeOnScroll = options.closeOnScroll !== undefined ? options.closeOnScroll : true;\n    this.delayClose = Number.isInteger(options.delayClose) ? options.delayClose : null;\n    this.closeOnTriggerAgain = !!options.closeOnTriggerAgain;\n    this.hideOnScroll = !!options.hideOnScroll;\n  }\n}\n","import { animate, state, style, transition, trigger } from '@angular/animations';\n\nexport const fadeInAnimation = trigger('fadeIn', [\n  state(\n    'open',\n    style({\n      transform: 'translateY(0px)',\n      opacity: 1,\n    })\n  ),\n  state(\n    'close',\n    style({\n      transform: 'translateY(-6px)',\n      opacity: 0.5,\n    })\n  ),\n  transition('close => open', [animate('0.15s')]),\n]);\n","import { ElementRef } from '@angular/core';\nimport { PopoverConfig } from '../popover.token';\nimport { PopoverPosition, PopoverType } from '../popover.interface';\nimport { PopoverContentComponent } from '../components/popover-content/popover-content.component';\n\nconst SPACE_FROM_BOTTOM = 20;\nconst SPACE_FROM_TOP = 10;\nconst HORIZONTAL_SPACE = 10;\nconst POSITION_MEASURE_UNIT = 'px';\n\nexport class PopoverStyles {\n  private popover: PopoverContentComponent;\n  private hostElement: ElementRef<any>;\n  private config: PopoverConfig;\n  private type: PopoverType;\n  private position: PopoverPosition;\n  private initHostElementWidth: number = 0;\n\n  constructor(popover: PopoverContentComponent) {\n    this.popover = popover;\n    this.hostElement = popover.element;\n    this.config = popover.popoverConfig;\n    this.type = this.config.type;\n    this.position = this.config.position;\n  }\n\n  init(): void {\n    const hostBounds = this.config.bounds;\n\n    this.hostElement.nativeElement.style.zIndex = 10000;\n\n    this.setPositionStyle('left', 0);\n    this.setPositionStyle('top', +hostBounds.top + hostBounds.height + SPACE_FROM_TOP);\n\n    if (!this.isContextType && !this.isSubmenuType) {\n      this.hostElement.nativeElement.style.minWidth = hostBounds.width + 'px';\n    }\n\n    if (this.isContextType) {\n      this.setPositionStyle('top', +hostBounds.top);\n      this.hostElement.nativeElement.style.minWidth = 0;\n    }\n\n    if (this.isSubmenuType) {\n      const triggerItem = this.config.submenuTriggeredItem.element.nativeElement;\n      const triggerBounds: ClientRect = triggerItem.getBoundingClientRect();\n\n      this.hostElement.nativeElement.style.minWidth = 0;\n      this.setPositionStyle('top', triggerBounds.top);\n    }\n\n    if (this.canAssignPadding) {\n      const padding = this.isTooltip ? '8px 12px' : '15px 25px';\n      this.popover.popoverWrapperEl.nativeElement.style.padding = padding;\n    }\n\n    this.hostElement.nativeElement.style.visibility = 'hidden';\n\n    setTimeout(() => {\n      this.initHostElementWidth = this.hostElement.nativeElement.offsetWidth + 1;\n      this.hostElement.nativeElement.style.minWidth = this.initHostElementWidth + 'px';\n    });\n  }\n\n  update(): void {\n    this.setLeftPosition();\n    this.setTopPosition();\n    this.setWidth();\n\n    this.hostElement.nativeElement.style.visibility = 'visible';\n  }\n\n  private setTopPosition(): void {\n    const windowHeight = window.innerHeight;\n    const elementHeight = this.hostElement.nativeElement.getBoundingClientRect().height;\n    const triggerBounds = this.config.triggerElement.nativeElement.getBoundingClientRect();\n\n    if (this.config.triggerDirective) {\n      const hostTopPosition =\n        this.config.type === 'context' ? this.config.bounds.top : triggerBounds.top + triggerBounds.height;\n      const isBelowWindowCenterHeight = elementHeight >= windowHeight - hostTopPosition - SPACE_FROM_BOTTOM;\n\n      if (isBelowWindowCenterHeight) {\n        if (this.config.type === 'context') {\n          this.setPositionStyle('top', +this.config.bounds.top - elementHeight + SPACE_FROM_TOP);\n        } else {\n          const newPos = triggerBounds.top - elementHeight - SPACE_FROM_TOP;\n          if (newPos > 0) {\n            switch (this.position) {\n              case 'bottom':\n                this.setPositionStyle('top', triggerBounds.top - elementHeight - SPACE_FROM_TOP);\n                break;\n              case 'top':\n                this.setPositionStyle('top', triggerBounds.top - elementHeight - SPACE_FROM_TOP);\n            }\n          } else {\n            this.hostElement.nativeElement.style.height =\n              windowHeight - hostTopPosition - SPACE_FROM_BOTTOM + POSITION_MEASURE_UNIT;\n          }\n        }\n      } else {\n        if (this.config.type === 'context') {\n          this.setPositionStyle('top', +this.config.bounds.top + SPACE_FROM_TOP);\n        } else {\n          switch (this.position) {\n            case 'bottom':\n              this.setPositionStyle('top', triggerBounds.top + triggerBounds.height + SPACE_FROM_TOP);\n              break;\n            case 'top':\n              this.setPositionStyle('top', triggerBounds.top - elementHeight - SPACE_FROM_TOP);\n              break;\n            case 'left':\n            case 'right':\n              this.setPositionStyle(\n                'top',\n                triggerBounds.top - (elementHeight / 2 - triggerBounds.height / 2)\n              );\n              break;\n          }\n        }\n      }\n    }\n\n    if (!this.config.triggerDirective) {\n      const hostBounds = this.config.submenuTriggeredItem.element.nativeElement.getBoundingClientRect();\n      const hostPosition = hostBounds.top;\n\n      if (elementHeight >= windowHeight - hostPosition - SPACE_FROM_BOTTOM) {\n        const diff = elementHeight - (windowHeight - hostPosition);\n        this.setPositionStyle('top', hostPosition - diff - SPACE_FROM_BOTTOM);\n      } else {\n        this.setPositionStyle('top', hostPosition);\n      }\n    }\n  }\n\n  private setLeftPosition(): void {\n    const windowWidth = window.innerWidth;\n    const elementWidth = this.hostElement.nativeElement.getBoundingClientRect().width;\n    const triggerBounds = this.config.triggerElement.nativeElement.getBoundingClientRect();\n\n    if (this.isContextType) {\n      if (+this.config.bounds.left >= windowWidth / 2) {\n        this.setPositionStyle('left', +this.config.bounds.left - elementWidth);\n      } else {\n        this.setPositionStyle('left', this.defaultLeftPosition);\n      }\n    } else if (this.config.triggerDirective) {\n      switch (this.position) {\n        case 'bottom':\n        case 'top':\n          this.setPositionStyle('left', triggerBounds.left);\n          break;\n        case 'left':\n          this.setPositionStyle('left', triggerBounds.left - elementWidth - HORIZONTAL_SPACE);\n          break;\n        case 'right':\n          this.setPositionStyle('left', triggerBounds.left + triggerBounds.width + HORIZONTAL_SPACE);\n          break;\n      }\n\n      const hostRecBounds = this.hostElement.nativeElement.getBoundingClientRect();\n\n      if (hostRecBounds.right > windowWidth - 20) {\n        this.setPositionStyle('left', hostRecBounds.left - (hostRecBounds.right - windowWidth + 20));\n      }\n\n      if (hostRecBounds.left < 0) {\n        this.setPositionStyle('left', 15);\n      }\n    } else {\n      const hostBounds = this.config.submenuTriggeredItem.element.nativeElement.getBoundingClientRect();\n\n      if (elementWidth > windowWidth - hostBounds.right) {\n        this.setPositionStyle('left', hostBounds.left - this.initHostElementWidth);\n      } else {\n        this.setPositionStyle('left', hostBounds.right);\n      }\n    }\n  }\n\n  private setWidth(): void {\n    const triggerBounds: ClientRect = this.config.triggerElement.nativeElement.getBoundingClientRect();\n\n    if (!this.isContextType && !this.isSubmenuType) {\n      const windowWidth = window.innerWidth;\n      const hostElBounds = this.hostElement.nativeElement.getBoundingClientRect();\n\n      this.hostElement.nativeElement.style.minWidth = this.initHostElementWidth + POSITION_MEASURE_UNIT;\n\n      if (!this.isMenuType) {\n        if (hostElBounds.width > windowWidth || this.initHostElementWidth > windowWidth - 30) {\n          this.hostElement.nativeElement.style.width = windowWidth - 30 + POSITION_MEASURE_UNIT;\n          this.hostElement.nativeElement.style.minWidth = windowWidth - 30 + POSITION_MEASURE_UNIT;\n          this.setPositionStyle('left', 15);\n        }\n      }\n    }\n  }\n\n  private setPositionStyle(property: 'top' | 'left', value: number): void {\n    this.hostElement.nativeElement.style[property] = value + POSITION_MEASURE_UNIT;\n  }\n\n  private get defaultLeftPosition(): number {\n    return this.config.bounds.left;\n  }\n\n  private get canAssignPadding(): boolean {\n    return (\n      (!this.isContextType && !this.isMenuType && !this.isSubmenuType) ||\n      (this.isSubmenuType && !!this.config.content)\n    );\n  }\n\n  private get isContextType(): boolean {\n    return this.type === 'context';\n  }\n\n  private get isMenuType(): boolean {\n    return this.type === 'menu';\n  }\n\n  private get isSubmenuType(): boolean {\n    return this.type === 'submenu';\n  }\n\n  private get isTooltip(): boolean {\n    return this.type === 'tooltip';\n  }\n}\n","import {\n  Directive,\n  ElementRef,\n  EventEmitter,\n  AfterViewInit,\n  Output,\n  Input,\n  TemplateRef,\n  HostBinding,\n  OnInit,\n  OnChanges,\n} from '@angular/core';\nimport { fromEvent, Observable } from 'rxjs';\nimport { PopoverMenuComponent } from '../components/popover-menu/popover-menu.component';\nimport { tap } from 'rxjs/operators';\n\n@Directive({\n  selector: '[poppy-menu-item]',\n})\nexport class PopoverMenuItemDirective implements OnInit, AfterViewInit {\n  @Input() submenu: PopoverMenuComponent | TemplateRef<any>;\n  @Input() selected: boolean = false;\n  @Input() hidden: boolean = false;\n  @Output() clicked: EventEmitter<void> = new EventEmitter();\n\n  @HostBinding('class.popover-menu-item--selected')\n  get selectedClass(): boolean {\n    return this.selected;\n  }\n\n  @HostBinding('class.popover-menu-item--hidden')\n  get hiddenClass(): boolean {\n    return this.hidden;\n  }\n\n  clicked$: Observable<MouseEvent>;\n  hovered$: Observable<MouseEvent>;\n  global$: Observable<MouseEvent>;\n\n  constructor(public element: ElementRef) {}\n\n  ngOnInit(): void {\n    this.clicked$ = fromEvent<MouseEvent>(this.element.nativeElement, 'click').pipe(\n      tap(() => {\n        this.clicked.emit();\n      })\n    );\n    this.hovered$ = fromEvent(this.element.nativeElement, 'mousemove');\n    // this.global$ = fromEvent<MouseEvent>(document, 'click').pipe(tap(() => console.log('clicked window')));\n  }\n\n  ngAfterViewInit(): void {\n    this.element.nativeElement.classList.add('popover-menu-item');\n  }\n}\n","<ng-template>\n  <ng-content></ng-content>\n</ng-template>","import { QueryList, ContentChildren, Component, TemplateRef, ViewChild, ChangeDetectionStrategy } from '@angular/core';\nimport { PopoverMenuItemDirective } from '../../directives/popover-menu-item.directive';\n\n@Component({\n  selector: 'poppy-menu',\n  exportAs: 'poppyMenu',\n  templateUrl: './popover-menu.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class PopoverMenuComponent {\n  @ContentChildren(PopoverMenuItemDirective) menuItems: QueryList<PopoverMenuItemDirective>;\n  @ViewChild(TemplateRef) templateRef: TemplateRef<any>;\n\n  constructor() {}\n}\n","import { ComponentRef } from '@angular/core';\n\nimport { PopoverType } from '../popover.interface';\nimport { PopoverContentComponent } from '../components/popover-content/popover-content.component';\nimport { BasePopoverDirective } from '../directives/base-popover';\n\nexport class ActivePopover {\n  isMenuParent: boolean;\n  isSuperparent: boolean;\n  isSubmenu: boolean;\n\n  constructor(\n    public popoverRef: ComponentRef<PopoverContentComponent>,\n    public parentPopoverRef: ComponentRef<PopoverContentComponent>,\n    public superParentPopoverRef: ComponentRef<PopoverContentComponent>,\n    public directiveRef: BasePopoverDirective,\n    public type: PopoverType,\n    public deepLevel: number\n  ) {\n    this.isMenuParent = type === 'menu';\n    this.isSubmenu = type === 'submenu';\n    this.isSuperparent = this.popoverRef === this.superParentPopoverRef;\n  }\n}\n","import { ILayerAppendOptions } from './layer.interface';\n\nexport class LayerAppendOptions {\n  delayClose: number;\n  overlay: boolean;\n\n  constructor(options: ILayerAppendOptions = {}) {\n    this.delayClose = Number.isInteger(options.delayClose) ? options.delayClose : null;\n    this.overlay = !!options.overlay;\n  }\n}\n","import { InjectionToken } from '@angular/core';\n\nexport const LAYER_CONFIG = new InjectionToken<LayerConfig>('layer-token');\n\nexport interface LayerConfig {\n  overlay?: boolean;\n}\n","import {\n  Component,\n  HostBinding,\n  Inject,\n  ViewChild,\n  ViewContainerRef,\n  ViewEncapsulation\n} from '@angular/core';\n\nimport { LAYER_CONFIG, LayerConfig } from './layer.token';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'poppy-layer',\n  templateUrl: './layer.component.html',\n  styleUrls: ['./layer.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class LayerComponent {\n  @ViewChild('container', { read: ViewContainerRef}) container: ViewContainerRef;\n\n  constructor(@Inject(LAYER_CONFIG) private config: LayerConfig) {}\n\n  @HostBinding('class.poppy-layer--overlay') get overlay(): boolean {\n    return this.config.overlay;\n  }\n}\n","<ng-container #container></ng-container>\n","import {\n  ApplicationRef,\n  ComponentFactoryResolver,\n  ComponentRef,\n  EmbeddedViewRef,\n  Injectable,\n  Injector,\n  Type,\n} from '@angular/core';\nimport { LayerComponent } from './layer.component';\nimport { ActiveLayer } from './layer.interface';\nimport { LayerAppendOptions } from './layer.model';\nimport { LAYER_CONFIG } from './layer.token';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class LayerService {\n  private activeLayers: ActiveLayer<any>[] = [];\n\n  constructor(\n    private readonly componentFactoryResolver: ComponentFactoryResolver,\n    private readonly appRef: ApplicationRef\n  ) {}\n\n  appendToBody<T>(component: Type<T>, options: LayerAppendOptions, injector?): ComponentRef<T> {\n    const componentFactory = this.componentFactoryResolver.resolveComponentFactory(LayerComponent);\n    const componentRef = componentFactory.create(\n      Injector.create([\n        {\n          provide: LAYER_CONFIG,\n          useValue: options,\n        },\n      ])\n    );\n\n    componentRef.changeDetectorRef.detectChanges();\n\n    const appendComponentFactory = this.componentFactoryResolver.resolveComponentFactory(component);\n    const appendComponentRef = componentRef.instance.container.createComponent(\n      appendComponentFactory,\n      null,\n      injector\n    );\n\n    this.activeLayers.push({\n      ref: componentRef,\n      appendComponentRef,\n      options,\n    });\n\n    this.appRef.attachView(componentRef.hostView);\n    const domElem = (componentRef.hostView as EmbeddedViewRef<unknown>).rootNodes[0] as HTMLElement;\n    document.body.appendChild(domElem);\n\n    return appendComponentRef;\n  }\n\n  removeFromBody<T>(componentRef: ComponentRef<T>): void {\n    const layers = this.activeLayers.filter((layer) => layer.appendComponentRef === componentRef);\n\n    layers.forEach((layer) => {\n      const delayClose = layer.options.delayClose;\n      if (delayClose !== null) {\n        setTimeout(() => {\n          this.removeLayer<T>(layer);\n        }, delayClose);\n      } else {\n        this.removeLayer<T>(layer);\n      }\n    });\n\n    this.activeLayers = this.activeLayers.filter((layer) => layer.appendComponentRef !== componentRef);\n  }\n\n  private removeLayer<T>(layer: ActiveLayer<T>): void {\n    this.appRef.detachView(layer.ref.hostView);\n    layer.ref.changeDetectorRef.detectChanges();\n    layer.ref.destroy();\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { IPopoverEventService } from '../popover.interface';\nimport { Subscription, Observable, merge, fromEvent } from 'rxjs';\nimport { ActivePopover } from '../models/popover-active.model';\nimport { tap } from 'rxjs/operators';\n\nexport type PopoverEventType = 'click-outside' | 'resize' | 'capture-scroll';\n\ninterface PopoverRegisteredEvent {\n  sub: Subscription;\n  popover: ActivePopover;\n  type: PopoverEventType;\n  callback?: (args?) => void | any;\n}\n\n@Injectable({ providedIn: 'root' })\nexport class PopoverEventsService implements IPopoverEventService {\n  private registeredEvents: PopoverRegisteredEvent[] = [];\n\n  constructor(private ngZone: NgZone) {}\n\n  register(\n    type: PopoverEventType,\n    activePopover: ActivePopover,\n    callback: (event: Event) => void | any\n  ): void {\n    let sub: Subscription;\n\n    this.ngZone.runOutsideAngular(() => {\n      const obs: Observable<Event> = this.getEventObservable(type);\n      sub = obs.subscribe((event) => {\n        callback(event);\n      });\n    });\n\n    this.registeredEvents.push({ popover: activePopover, type, sub, callback });\n  }\n\n  unregister(type: PopoverEventType, activePopover: ActivePopover): void {\n    this.registeredEvents\n      .filter((event) => event.type === type)\n      .forEach((event) => {\n        if (event.popover === activePopover) {\n          event.sub.unsubscribe();\n        }\n      });\n    this.registeredEvents = this.registeredEvents.filter((event) =>\n      event.type === type ? event.popover !== activePopover : true\n    );\n  }\n\n  subscribe(type: PopoverEventType, popover: ActivePopover): void {\n    const obs: Observable<Event> = this.getEventObservable(type);\n\n    this.registeredEvents\n      .filter((event) => event.type === type && event.popover === popover && event.sub?.closed)\n      .forEach((event) => {\n        event.sub = obs.subscribe((e) => event.callback(e));\n      });\n  }\n\n  unsubscribe(type: PopoverEventType, popover: ActivePopover): void {\n    this.registeredEvents\n      .filter((event) => event.type === type && event.popover === popover)\n      .forEach((event) => {\n        event.sub.unsubscribe();\n      });\n  }\n\n  private getEventObservable(type: PopoverEventType): Observable<Event> {\n    switch (type) {\n      case 'click-outside':\n        return merge(fromEvent(document, 'click'), fromEvent(document, 'contextmenu'))\n          .pipe\n          // tap(() => console.log('listen for click outside..'))\n          ();\n      case 'capture-scroll':\n        return fromEvent<MouseEvent>(document, 'scroll').pipe(\n          tap(() => {\n            // console.log('Capturing scroll event..');\n          })\n        );\n      case 'resize':\n        return fromEvent<MouseEvent>(window, 'resize').pipe(\n          tap(() => {\n            // console.log('Resize event..');\n          })\n        );\n    }\n  }\n}\n","import { ComponentRef, Injectable, Injector } from '@angular/core';\n\nimport { PopoverContentComponent } from '../components/popover-content/popover-content.component';\nimport { LayerService } from '../../layer/layer.service';\nimport { PopoverAppendOptions } from '../models/popover-append-options.model';\nimport { ActivePopover } from '../models/popover-active.model';\nimport { BasePopoverDirective } from '../directives/base-popover';\nimport { LayerAppendOptions } from '../../layer/layer.model';\nimport { PopoverEventsService } from './events.service';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class PopoverService {\n  activePopovers: ActivePopover[] = [];\n\n  constructor(private layerService: LayerService, private eventsService: PopoverEventsService) {}\n\n  append(\n    injector: Injector,\n    directive: BasePopoverDirective,\n    options: PopoverAppendOptions,\n    parentPopoverRef?: ComponentRef<PopoverContentComponent>\n  ): ComponentRef<PopoverContentComponent> {\n    const existedPopover = this.activePopovers.find((popover) => popover.directiveRef === directive);\n\n    if (options.closeOnTriggerAgain && existedPopover) {\n      this.remove(existedPopover.popoverRef);\n      return existedPopover.popoverRef;\n    } else {\n      return this.appendToBody(injector, directive, options, parentPopoverRef);\n    }\n  }\n\n  remove(popoverRef: ComponentRef<PopoverContentComponent>): void {\n    const active: ActivePopover = this.activePopovers.find((p) => p.popoverRef === popoverRef);\n\n    if (active) {\n      if (active.directiveRef) {\n        active.directiveRef.popoverComponentRef = null;\n        active.directiveRef.afterClose.emit();\n      }\n      active.popoverRef.destroy();\n      this.layerService.removeFromBody(active.popoverRef);\n      this.eventsService.unregister('click-outside', active);\n      this.eventsService.unregister('capture-scroll', active);\n      this.eventsService.unregister('resize', active);\n\n      this.activePopovers = this.activePopovers.filter((a) => a.popoverRef !== popoverRef);\n    }\n  }\n\n  removeByNativeElementRef(element: HTMLElement): void {\n    const activePopover = this.activePopovers.find(\n      (active) => active.popoverRef.location.nativeElement === element\n    );\n\n    if (activePopover) {\n      this.remove(activePopover.popoverRef);\n    }\n  }\n\n  getActive(popoverRef: ComponentRef<PopoverContentComponent>): ActivePopover {\n    return this.activePopovers.find((active) => active.popoverRef === popoverRef);\n  }\n\n  isPopoverSubmenuExits(\n    precendingRef: ComponentRef<PopoverContentComponent>,\n    parentRef: ComponentRef<PopoverContentComponent>\n  ): boolean {\n    const precendingActivePopover: ActivePopover = this.getActive(precendingRef);\n\n    if (!precendingActivePopover || (precendingActivePopover && !precendingActivePopover.deepLevel)) {\n      return false;\n    }\n\n    return !!this.activePopovers.find(\n      (popover) =>\n        popover.parentPopoverRef === parentRef && popover.deepLevel === precendingActivePopover.deepLevel + 1\n    );\n  }\n\n  removeAllNestedPopovers(popoverRef: ComponentRef<PopoverContentComponent>): void {\n    const activePopover = this.getActive(popoverRef);\n\n    if (activePopover) {\n      this.activePopovers\n        .filter((popover) => popover.deepLevel > activePopover.deepLevel)\n        .forEach((popover) => {\n          this.remove(popover.popoverRef);\n        });\n    }\n  }\n\n  removeMenu(componentRef: ComponentRef<PopoverContentComponent>): void {\n    this.activePopovers\n      .filter((popover) => popover.parentPopoverRef === componentRef || popover.popoverRef === componentRef)\n      .forEach((popover) => {\n        this.remove(popover.popoverRef);\n      });\n  }\n\n  subscribeToClickOutsideEventForParentPopover(componentRef: ComponentRef<PopoverContentComponent>): void {\n    const currentPopover: ActivePopover = this.getActive(componentRef);\n\n    if (currentPopover) {\n      const parentPopover: ActivePopover = this.activePopovers.find(\n        (popover) =>\n          popover.superParentPopoverRef === currentPopover.superParentPopoverRef &&\n          popover.deepLevel === currentPopover.deepLevel - 1\n      );\n\n      if (parentPopover) {\n        setTimeout(() => {\n          this.eventsService.subscribe('click-outside', parentPopover);\n        });\n      }\n    }\n  }\n\n  private appendToBody(\n    injector: Injector,\n    directive: BasePopoverDirective,\n    options: PopoverAppendOptions,\n    parentPopoverRef?: ComponentRef<PopoverContentComponent>\n  ): ComponentRef<PopoverContentComponent> {\n    const layerOptions = new LayerAppendOptions({ delayClose: options.delayClose });\n    const popover = this.layerService.appendToBody(PopoverContentComponent, layerOptions, injector);\n    const { superparent, deepLevel } = this.prepareSuperparentAndDeepLevel(\n      popover,\n      parentPopoverRef,\n      directive\n    );\n    const newPopover = new ActivePopover(\n      popover,\n      parentPopoverRef,\n      superparent,\n      directive,\n      options.type,\n      deepLevel\n    );\n\n    popover.instance.componentRef = popover;\n    popover.instance.parentPopoverRef = popover;\n    popover.changeDetectorRef.detectChanges();\n\n    this.activePopovers.push(newPopover);\n\n    if (newPopover.directiveRef) {\n      newPopover.directiveRef.afterShow.emit();\n    }\n\n    if (this.canRegisterScrollCaptureEvent(newPopover, options)) {\n      this.registerScrollCaptureEvent(newPopover, options);\n    }\n\n    if (this.canRegisterResizeEvent(newPopover, options)) {\n      this.registerResizeEvent(newPopover, options);\n    }\n\n    return popover;\n  }\n\n  private prepareSuperparentAndDeepLevel(\n    popover: ComponentRef<PopoverContentComponent>,\n    parentPopover: ComponentRef<PopoverContentComponent>,\n    directive: BasePopoverDirective\n  ): { deepLevel: number; superparent: ComponentRef<PopoverContentComponent> } {\n    let deepLevel = 0;\n    let superparent = null;\n\n    if (directive) {\n      const parentPopover = this.activePopovers.find((p) => {\n        return p.popoverRef.instance.element.nativeElement.contains(directive.hostElement.nativeElement);\n      });\n\n      if (!parentPopover) {\n        superparent = popover;\n        deepLevel = 0;\n      } else {\n        superparent = parentPopover.superParentPopoverRef || parentPopover.popoverRef;\n        deepLevel = parentPopover.deepLevel + 1;\n      }\n    } else {\n      const closestParent = this.activePopovers.find((p) => p.popoverRef === parentPopover);\n      if (closestParent) {\n        const popoverGroup = this.activePopovers.filter(\n          (p) => p.superParentPopoverRef === closestParent.superParentPopoverRef\n        );\n        superparent = closestParent.superParentPopoverRef;\n        deepLevel = popoverGroup[popoverGroup.length - 1].deepLevel + 1;\n      }\n    }\n\n    return {\n      deepLevel,\n      superparent,\n    };\n  }\n\n  private canRegisterScrollCaptureEvent(popover: ActivePopover, options: PopoverAppendOptions): boolean {\n    const { triggeredBy, type, closeOnScroll } = options;\n\n    return (\n      popover.directiveRef &&\n      popover.deepLevel === 0 &&\n      triggeredBy !== 'hover' &&\n      type !== 'submenu' &&\n      closeOnScroll\n    );\n  }\n\n  private canRegisterResizeEvent(popover: ActivePopover, options: PopoverAppendOptions): boolean {\n    const { triggeredBy, type } = options;\n\n    return popover.directiveRef && popover.deepLevel === 0 && triggeredBy !== 'hover' && type !== 'submenu';\n  }\n\n  private registerResizeEvent(popover: ActivePopover, options: PopoverAppendOptions): void {\n    this.eventsService.register('resize', popover, () => {\n      if (options.type === 'context') {\n        this.hideGroup(popover);\n      } else {\n        this.updateGroupPosition(popover);\n      }\n    });\n  }\n\n  private registerScrollCaptureEvent(popover: ActivePopover, options: PopoverAppendOptions): void {\n    this.eventsService.register('capture-scroll', popover, (event: MouseEvent) => {\n      const captured =\n        popover.directiveRef.hostElement.nativeElement === event.target ||\n        (event.target as HTMLElement).contains(popover.directiveRef.hostElement.nativeElement);\n\n      if ((captured && options.hideOnScroll) || options.type === 'context') {\n        this.hideGroup(popover);\n      }\n\n      if (captured && !options.hideOnScroll && options.type !== 'context') {\n        this.updateGroupPosition(popover);\n      }\n    });\n  }\n\n  private hideGroup(popover: ActivePopover): void {\n    this.activePopovers.forEach((active) => {\n      if (active.superParentPopoverRef === popover.superParentPopoverRef) {\n        this.remove(active.popoverRef);\n      }\n    });\n  }\n\n  private updateGroupPosition(popover: ActivePopover): void {\n    this.activePopovers\n      .filter((active) => active.superParentPopoverRef === popover.popoverRef)\n      .forEach((active) => {\n        if (active.popoverRef.instance.componentStyles) {\n          active.popoverRef.instance.componentStyles.update();\n        }\n      });\n  }\n}\n","<div\n  #popoverWrapperEl\n  class=\"popover-content\"\n  [@fadeIn]=\"animationState\"\n  (@fadeIn.done)=\"animationEnd($event)\"\n>\n  <ng-container *ngIf=\"template; else textContent\">\n    <ng-container *ngTemplateOutlet=\"template\"></ng-container>\n  </ng-container>\n\n  <ng-template #textContent>\n    {{ popoverConfig.content }}\n  </ng-template>\n</div>\n","import {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ComponentFactoryResolver,\n  ComponentRef,\n  ElementRef,\n  Inject,\n  Injector,\n  NgZone,\n  OnDestroy,\n  ViewChild,\n  ViewRef,\n  ViewEncapsulation,\n  TemplateRef,\n} from '@angular/core';\nimport { AnimationEvent } from '@angular/animations';\nimport { fromEvent, Subject } from 'rxjs';\nimport { debounceTime, skipUntil, takeUntil } from 'rxjs/operators';\n\nimport { POPOVER_CONFIG, PopoverConfig } from '../../popover.token';\nimport { PopoverService } from '../../services/popover.service';\nimport { PopoverType } from '../../popover.interface';\nimport { PopoverAppendOptions } from '../../models/popover-append-options.model';\nimport { fadeInAnimation } from '../../popover.animations';\nimport { PopoverStyles } from '../../models/popover-styles.model';\nimport { PopoverEventsService } from '../../services/events.service';\nimport { PopoverMenuItemDirective } from '../../directives/popover-menu-item.directive';\nimport { PopoverMenuComponent } from '../popover-menu/popover-menu.component';\n\n@Component({\n  selector: 'poppy-content',\n  templateUrl: './popover-content.component.html',\n  styleUrls: ['./popover-content.component.scss'],\n  animations: [fadeInAnimation],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class PopoverContentComponent implements OnDestroy, AfterViewInit {\n  @ViewChild('popoverWrapperEl') popoverWrapperEl: ElementRef;\n\n  componentRef: ComponentRef<PopoverContentComponent>;\n  parentPopoverRef: ComponentRef<PopoverContentComponent>;\n  animationState: 'open' | 'close' = 'close';\n  componentStyles: PopoverStyles;\n  private subMenuComponentRef: ComponentRef<PopoverContentComponent>;\n  private animationEnd$ = new Subject();\n  private menuItemsChanged = new Subject();\n  private destroy$ = new Subject();\n\n  constructor(\n    public readonly element: ElementRef,\n    private readonly ngZone: NgZone,\n    private readonly componentFactoryResolver: ComponentFactoryResolver,\n    private readonly popoverService: PopoverService,\n    private readonly popoverEventsService: PopoverEventsService,\n    private readonly cdr: ChangeDetectorRef,\n    @Inject(POPOVER_CONFIG) public readonly popoverConfig: PopoverConfig\n  ) {}\n\n  ngAfterViewInit(): void {\n    this.applyStyles();\n\n    if (this.popoverConfig.submenuTriggeredItem) {\n      this.popoverConfig.submenuTriggeredItem.element.nativeElement.classList.add(\n        'popover-menu-item--focused'\n      );\n    }\n\n    if (this.popoverConfig.innerClass) {\n      this.popoverWrapperEl.nativeElement.classList.add(this.popoverConfig.innerClass);\n    }\n\n    this.listenForMouseEventOnHost();\n\n    if (this.canListenForClickOutside()) {\n      this.ngZone.runOutsideAngular(() => {\n        setTimeout(() => {\n          this.listenForClickOutside();\n        });\n      });\n    }\n\n    if (this.popoverConfig.menuRef?.menuItems) {\n      this.listenForMenuItemTriggers();\n\n      // Subscribe to click outside event again, when menu items changed - it's workaround to refresh host element content;\n      this.popoverConfig.menuRef.menuItems.changes.pipe(takeUntil(this.destroy$)).subscribe(() => {\n        this.menuItemsChanged.next();\n\n        this.listenForMenuItemTriggers();\n        this.popoverEventsService.unregister(\n          'click-outside',\n          this.popoverService.getActive(this.componentRef)\n        );\n        setTimeout(() => {\n          this.listenForClickOutside();\n          this.componentStyles.update();\n        }, 0);\n      });\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.popoverConfig.submenuTriggeredItem) {\n      this.popoverConfig.submenuTriggeredItem.element.nativeElement.classList.remove(\n        'popover-menu-item--focused'\n      );\n    }\n\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  get template(): TemplateRef<any> {\n    return (\n      (this.popoverConfig.content instanceof TemplateRef &&\n        (this.popoverConfig.content as TemplateRef<any>)) ||\n      this.popoverConfig.menuRef?.templateRef\n    );\n  }\n\n  animationEnd(event: AnimationEvent): void {\n    if (event.toState === 'open') {\n      this.animationEnd$.next();\n    }\n  }\n\n  private applyStyles(): void {\n    this.componentStyles = new PopoverStyles(this);\n    this.componentStyles.init();\n\n    setTimeout(() => {\n      this.componentStyles.update();\n      this.animationState = 'open';\n      this.detectChanges();\n    });\n  }\n\n  private onClickMenuItem(item: PopoverMenuItemDirective): void {\n    const hasItemNestedSubpopovers = !!item.submenu;\n\n    if (!hasItemNestedSubpopovers) {\n      if (this.popoverConfig.closeOnClickItem) {\n        this.close();\n      }\n    }\n  }\n\n  private onHoverMenuItem(item: PopoverMenuItemDirective): void {\n    const canRemoveNestedSubmenus = !this.popoverService.activePopovers.find(\n      (popover) => popover.popoverRef.instance.popoverConfig.submenuTriggeredItem === item\n    );\n    const hasItemNestedSubpopovers = !!item.submenu;\n\n    if (canRemoveNestedSubmenus) {\n      this.popoverService.removeAllNestedPopovers(this.componentRef);\n      this.detectChanges();\n    }\n\n    const isSubmenuExists = this.popoverService.isPopoverSubmenuExits(\n      this.componentRef,\n      this.parentPopoverRef\n    );\n\n    if (!isSubmenuExists && hasItemNestedSubpopovers && canRemoveNestedSubmenus) {\n      this.createSubpopover(item);\n    }\n  }\n\n  private listenForClickOutside(): void {\n    const activePopover = this.popoverService.getActive(this.componentRef);\n\n    this.popoverEventsService.register('click-outside', activePopover, (event) => {\n      const clickedElement = event.target;\n      let clickedOutside =\n        clickedElement !== this.element.nativeElement &&\n        !this.element.nativeElement.contains(clickedElement) &&\n        clickedElement !== this.popoverConfig.triggerElement.nativeElement &&\n        !this.popoverConfig.triggerElement.nativeElement.contains(clickedElement);\n\n      if (\n        this.popoverConfig.type === 'context' &&\n        (clickedElement === this.popoverConfig.triggerElement.nativeElement ||\n          this.popoverConfig.triggerElement.nativeElement.contains(clickedElement))\n      ) {\n        clickedOutside = true;\n      }\n      if (clickedOutside) {\n        this.close();\n      }\n    });\n  }\n\n  private listenForMouseEventOnHost(): void {\n    fromEvent(this.element.nativeElement, 'mouseenter')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        const enteredPopover = this.popoverService.getActive(this.componentRef);\n\n        if (enteredPopover?.deepLevel) {\n          this.popoverService.activePopovers.forEach((popover, index) => {\n            if (index <= enteredPopover.deepLevel) {\n              this.popoverEventsService.unsubscribe('click-outside', popover);\n            } else {\n              this.popoverEventsService.subscribe('click-outside', popover);\n            }\n          });\n        }\n      });\n    fromEvent(this.element.nativeElement, 'mouseleave')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        this.popoverService.activePopovers.forEach((popover) => {\n          this.popoverEventsService.subscribe('click-outside', popover);\n        });\n      });\n  }\n\n  private listenForMenuItemTriggers(): void {\n    this.popoverConfig.menuRef.menuItems.forEach((item) => {\n      item.clicked$.pipe(takeUntil(this.destroy$), takeUntil(this.menuItemsChanged)).subscribe(() => {\n        this.onClickMenuItem(item);\n      });\n      item.hovered$\n        .pipe(\n          takeUntil(this.destroy$),\n          takeUntil(this.menuItemsChanged),\n          debounceTime(0),\n          skipUntil(this.animationEnd$)\n        )\n        .subscribe(() => {\n          this.onHoverMenuItem(item);\n        });\n    });\n  }\n\n  private close(): void {\n    if (this.isMenu()) {\n      this.popoverService.subscribeToClickOutsideEventForParentPopover(this.componentRef);\n      this.popoverService.removeMenu(this.parentPopoverRef);\n    } else {\n      this.popoverService.remove(this.componentRef);\n    }\n  }\n\n  private createSubpopover(item: PopoverMenuItemDirective): void {\n    const factory = this.componentFactoryResolver.resolveComponentFactory(PopoverContentComponent);\n    const bounds = item.element.nativeElement.getBoundingClientRect();\n    const type: PopoverType = 'submenu';\n    const options = new PopoverAppendOptions({ type });\n\n    const providedValues: PopoverConfig = {\n      bounds,\n      type,\n      submenuTriggeredItem: item,\n      triggerElement: this.popoverConfig.triggerElement,\n      closeOnClickItem: this.popoverConfig.closeOnClickItem,\n    };\n\n    if (item?.submenu instanceof PopoverMenuComponent) {\n      providedValues.menuRef = item.submenu;\n    }\n    if (item?.submenu instanceof TemplateRef) {\n      providedValues.content = item.submenu;\n    }\n\n    const injector = Injector.create([\n      {\n        provide: POPOVER_CONFIG,\n        useValue: providedValues,\n      },\n    ]);\n\n    this.subMenuComponentRef = this.popoverService.append(injector, null, options, this.parentPopoverRef);\n    this.subMenuComponentRef.instance.componentRef = this.subMenuComponentRef;\n    this.subMenuComponentRef.instance.parentPopoverRef = this.parentPopoverRef;\n    this.subMenuComponentRef.hostView.detectChanges();\n  }\n\n  private isMenu(): boolean {\n    return (\n      this.popoverConfig.type === 'menu' ||\n      this.popoverConfig.type === 'context' ||\n      this.popoverConfig.type === 'submenu'\n    );\n  }\n\n  private canListenForClickOutside(): boolean {\n    return (\n      this.popoverConfig.closeOnClickOutside && (this.popoverConfig.trigger !== 'hover' || this.isMenu())\n    );\n  }\n\n  private detectChanges(): void {\n    if (this.cdr && !(this.cdr as ViewRef).destroyed) {\n      this.cdr.detectChanges();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { LayerComponent } from './layer.component';\n\n@NgModule({\n  declarations: [LayerComponent],\n  imports: [CommonModule],\n})\nexport class LayerModule {}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\n  ComponentFactoryResolver,\n  ComponentRef,\n  EventEmitter,\n  Injector,\n  Input,\n  OnDestroy,\n  Output,\n  ElementRef,\n  NgZone,\n  Directive,\n  OnInit,\n} from '@angular/core';\nimport { PopoverContentComponent } from '../components/popover-content/popover-content.component';\nimport { Subject } from 'rxjs';\n\nimport { PopoverService } from '../services/popover.service';\nimport { PopoverAppendOptions } from '../models/popover-append-options.model';\nimport { PopoverPosition, PopoverTrigger, PopoverType } from '../popover.interface';\n\n@Directive()\nexport abstract class BasePopoverDirective implements OnDestroy, OnInit {\n  @Input() trigger: PopoverTrigger = 'click';\n  // Options\n  @Input() delayClose: number = null;\n  @Input() closeOnTriggerAgain = undefined;\n  @Input() closeOnClickOutside = true;\n  @Input() hideOnScroll: boolean = false;\n  @Input() innerClass: string;\n  @Input() position: PopoverPosition = 'bottom';\n  // Emitters\n  @Output() afterClose = new EventEmitter();\n  @Output() afterShow = new EventEmitter();\n\n  popoverComponentRef: ComponentRef<PopoverContentComponent>;\n  protected type: PopoverType = 'popover';\n  protected destroy$ = new Subject();\n\n  protected constructor(\n    protected readonly componentFactoryResolver: ComponentFactoryResolver,\n    protected readonly popoverService: PopoverService,\n    public readonly hostElement: ElementRef,\n    protected readonly ngZone: NgZone\n  ) {}\n\n  ngOnInit(): void {\n    this.setOptions();\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.unsubscribe();\n  }\n\n  public abstract open(): void;\n\n  protected abstract getPopoverComponentInjector(): Injector;\n\n  protected abstract canAppend(): boolean;\n\n  public close(): void {\n    if (this.popoverComponentRef) {\n      this.remove(this.popoverComponentRef);\n    }\n  }\n\n  protected appendToLayer(options: PopoverAppendOptions): void {\n    const injector = this.getPopoverComponentInjector();\n    const opts: PopoverAppendOptions = {\n      ...options,\n      delayClose: this.delayClose,\n      closeOnTriggerAgain: this.closeOnTriggerAgain,\n      hideOnScroll: this.hideOnScroll,\n    };\n\n    this.popoverComponentRef = this.popoverService.append(injector, this, opts);\n  }\n\n  protected remove(popoverRef: ComponentRef<PopoverContentComponent>): void {\n    this.ngZone.run(() => {\n      this.popoverService.remove(popoverRef);\n    });\n  }\n\n  private setOptions(): void {\n    if (this.closeOnTriggerAgain === undefined) {\n      this.closeOnTriggerAgain = !(\n        this.type === 'tooltip' ||\n        this.trigger === 'hover' ||\n        this.type === 'context'\n      );\n    }\n  }\n}\n","import {\n  AfterViewInit,\n  ComponentFactoryResolver,\n  Directive,\n  ElementRef,\n  Injector,\n  Input,\n  NgZone,\n  TemplateRef,\n} from '@angular/core';\nimport { fromEvent, merge, timer } from 'rxjs';\nimport { takeUntil, debounceTime, tap, switchMap, take } from 'rxjs/operators';\nimport { POPOVER_CONFIG, PopoverConfig } from '../popover.token';\nimport { PopoverService } from '../services/popover.service';\nimport { PopoverAppendOptions } from '../models/popover-append-options.model';\nimport { BasePopoverDirective } from './base-popover';\n\n@Directive({\n  selector: '[poppyPopover]',\n  exportAs: 'poppyPopover',\n})\nexport class PopoverDirective extends BasePopoverDirective implements AfterViewInit {\n  @Input() poppyPopover: TemplateRef<HTMLElement> | string;\n\n  constructor(\n    protected readonly componentFactoryResolver: ComponentFactoryResolver,\n    protected readonly popoverService: PopoverService,\n    public readonly hostElement: ElementRef,\n    protected readonly ngZone: NgZone\n  ) {\n    super(componentFactoryResolver, popoverService, hostElement, ngZone);\n  }\n\n  ngAfterViewInit(): void {\n    if (this.poppyPopover) {\n      this.ngZone.runOutsideAngular(() => {\n        if (this.trigger === 'click') {\n          this.listenEventsForClickTrigger();\n        }\n\n        if (this.trigger === 'hover') {\n          this.listenEventsForHoverTrigger();\n        }\n      });\n    }\n  }\n\n  open(): void {\n    if (this.canAppend()) {\n      this.ngZone.run(() => {\n        this.append();\n      });\n    }\n  }\n\n  protected getPopoverComponentInjector(): Injector {\n    const providerValues: PopoverConfig = {\n      bounds: this.hostElement.nativeElement.getBoundingClientRect(),\n      type: this.type,\n      trigger: this.trigger,\n      triggerElement: this.hostElement,\n      triggerDirective: this,\n      content: this.poppyPopover,\n      closeOnClickOutside: this.closeOnClickOutside,\n      innerClass: this.innerClass,\n      position: this.position,\n    };\n\n    return Injector.create([\n      {\n        provide: POPOVER_CONFIG,\n        useValue: providerValues,\n      },\n    ]);\n  }\n\n  protected canAppend(): boolean {\n    return !this.popoverComponentRef || (this.popoverComponentRef && this.closeOnTriggerAgain);\n  }\n\n  private listenEventsForClickTrigger(): void {\n    fromEvent(this.hostElement.nativeElement, 'click')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        this.open();\n      });\n  }\n\n  private listenEventsForHoverTrigger(): void {\n    let popoverHovered = false;\n    let hostHovered = false;\n    let isMouseLeftBeforeDelayTimePast = false;\n\n    merge(\n      fromEvent(this.hostElement.nativeElement, 'mouseenter'),\n      fromEvent(this.hostElement.nativeElement, 'click')\n    )\n      .pipe(\n        takeUntil(this.destroy$),\n        tap(() => {\n          fromEvent(this.hostElement.nativeElement, 'mouseleave')\n            .pipe(takeUntil(this.destroy$), takeUntil(this.afterClose), debounceTime(200))\n            .subscribe(() => {\n              hostHovered = false;\n              isMouseLeftBeforeDelayTimePast = true;\n              setTimeout(() => {\n                isMouseLeftBeforeDelayTimePast = false;\n              }, 200);\n              if (!popoverHovered) {\n                this.remove(this.popoverComponentRef);\n              }\n            });\n        }),\n        switchMap(() => timer(300))\n      )\n      .subscribe(() => {\n        const isHostElementStillInDOM = document.body.contains(this.hostElement.nativeElement);\n        popoverHovered = false;\n        hostHovered = true;\n\n        if (isHostElementStillInDOM && !isMouseLeftBeforeDelayTimePast) {\n          this.open();\n        }\n\n        setTimeout(() => {\n          if (this.popoverComponentRef) {\n            fromEvent(this.popoverComponentRef.instance.element.nativeElement, 'mouseenter')\n              .pipe(takeUntil(this.afterClose))\n              .subscribe(() => {\n                popoverHovered = true;\n              });\n\n            fromEvent(this.popoverComponentRef.instance.element.nativeElement, 'mouseleave')\n              .pipe(takeUntil(this.afterClose))\n              .subscribe(() => {\n                popoverHovered = false;\n                if (!hostHovered) {\n                  this.remove(this.popoverComponentRef);\n                }\n              });\n          }\n        }, 0);\n      });\n\n    this.destroy$.pipe(take(1)).subscribe(() => {\n      if (this.popoverComponentRef) {\n        this.remove(this.popoverComponentRef);\n      }\n    });\n  }\n\n  private append(): void {\n    const options = new PopoverAppendOptions({\n      type: 'popover',\n      triggeredBy: this.trigger,\n    });\n\n    this.appendToLayer(options);\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[poppy-chip]',\n  exportAs: 'poppyChip'\n})\nexport class PopoverChipDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, Input, HostListener } from '@angular/core';\nimport { PopoverSelectComponent } from '../components/popover-select/popover-select.component';\n\n@Directive({\n  selector: '[poppyChipRemove]'\n})\nexport class PopoverChipRemoveDirective {\n  @Input() poppyChipRemove: any;\n\n  @HostListener('click', ['$event'])\n  onClick(event: Event) {\n    this.remove(event);\n  }\n\n  constructor(private selectComponentRef: PopoverSelectComponent) {}\n\n  remove(event: Event): void {\n    if (this.selectComponentRef) {\n      this.selectComponentRef.closeChip(this.poppyChipRemove, event);\n    }\n  }\n}\n","import {\n  AfterViewInit,\n  ComponentFactoryResolver,\n  Directive,\n  ElementRef,\n  Injector,\n  Input,\n  NgZone,\n} from '@angular/core';\nimport { fromEvent } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { POPOVER_CONFIG, PopoverConfig } from '../popover.token';\nimport { PopoverBounds, PopoverContextMenuPosition, PopoverMenuType } from '../popover.interface';\nimport { PopoverService } from '../services/popover.service';\nimport { PopoverAppendOptions } from '../models/popover-append-options.model';\nimport { BasePopoverDirective } from './base-popover';\nimport { PopoverMenuComponent } from '../components/popover-menu/popover-menu.component';\n\n@Directive({\n  selector: '[poppyMenu]',\n  exportAs: 'poppyMenu',\n})\nexport class PopoverMenuDirective extends BasePopoverDirective implements AfterViewInit {\n  @Input() poppyMenu: PopoverMenuComponent;\n  @Input() type: PopoverMenuType = 'menu';\n  @Input() closeOnClickItem: boolean = true;\n\n  private contextMenuPosition: PopoverContextMenuPosition;\n\n  constructor(\n    protected readonly componentFactoryResolver: ComponentFactoryResolver,\n    protected readonly popoverService: PopoverService,\n    public readonly hostElement: ElementRef,\n    protected readonly ngZone: NgZone\n  ) {\n    super(componentFactoryResolver, popoverService, hostElement, ngZone);\n  }\n\n  ngAfterViewInit(): void {\n    if (this.poppyMenu) {\n      this.ngZone.runOutsideAngular(() => {\n        if (this.trigger !== 'manual' && this.type === 'menu') {\n          this.listenEventsForClickTrigger();\n        }\n\n        if (this.type === 'context') {\n          this.listenEventsForContextTrigger();\n        }\n      });\n    }\n  }\n\n  open(): void {\n    if (this.canAppend()) {\n      this.ngZone.run(() => {\n        this.append();\n      });\n    }\n  }\n\n  // NOTE: It should be removed after upgrade to ng 9, because QueryList should emit changes\n  // when elements is removed\n  updateContentPosition(): void {\n    if (this.popoverComponentRef) {\n      this.popoverComponentRef.instance.componentStyles.update();\n    }\n  }\n\n  protected getPopoverComponentInjector(): Injector {\n    const providerValues: PopoverConfig = {\n      bounds: this.getBounds(),\n      type: this.type,\n      triggerElement: this.hostElement,\n      triggerDirective: this,\n      closeOnClickOutside: this.closeOnClickOutside,\n      closeOnClickItem: this.closeOnClickItem,\n      menuRef: this.poppyMenu,\n      innerClass: this.innerClass,\n      position: this.position,\n    };\n\n    return Injector.create([\n      {\n        provide: POPOVER_CONFIG,\n        useValue: providerValues,\n      },\n    ]);\n  }\n\n  protected canAppend(): boolean {\n    return (\n      !this.popoverComponentRef ||\n      (this.popoverComponentRef && this.type === 'context') ||\n      (this.popoverComponentRef && this.closeOnTriggerAgain)\n    );\n  }\n\n  private listenEventsForClickTrigger(): void {\n    fromEvent(this.hostElement.nativeElement, 'click')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe(() => {\n        this.open();\n      });\n  }\n\n  private listenEventsForContextTrigger(): void {\n    fromEvent(this.hostElement.nativeElement, 'contextmenu')\n      .pipe(takeUntil(this.destroy$))\n      .subscribe((event: MouseEvent) => {\n        event.preventDefault();\n        this.contextMenuPosition = {\n          top: event.clientY,\n          left: event.clientX,\n        };\n        this.open();\n      });\n  }\n\n  private append(): void {\n    const options = new PopoverAppendOptions({\n      type: this.type,\n    });\n\n    this.appendToLayer(options);\n  }\n\n  private getBounds(): PopoverBounds {\n    if (this.type === 'context') {\n      return { top: this.contextMenuPosition.top, left: this.contextMenuPosition.left };\n    } else {\n      return this.hostElement.nativeElement.getBoundingClientRect();\n    }\n  }\n}\n","import { Directive, TemplateRef } from '@angular/core';\n\n@Directive({\n  selector: '[poppy-option]',\n  exportAs: 'poppyOption',\n})\nexport class PopoverOptionDirective {\n  constructor(public template: TemplateRef<any>) {}\n}\n","import { Directive, ElementRef, HostListener } from '@angular/core';\nimport { PopoverService } from '../services/popover.service';\n@Directive({\n  selector: '[poppyRemoveOnClick]',\n})\nexport class PopoverRemoveOnClickDirective {\n  @HostListener('click', ['$event'])\n  onClick(): void {\n    this.remove();\n  }\n\n  constructor(private host: ElementRef, private popoverService: PopoverService) {}\n\n  remove(): void {\n    setTimeout(() => {\n      const parentElement = this.host.nativeElement.closest('poppy-content');\n      this.popoverService.removeByNativeElementRef(parentElement);\n    });\n  }\n}\n","import {\n  ComponentFactoryResolver,\n  Directive,\n  ElementRef,\n  Input,\n  NgZone,\n  OnInit,\n  TemplateRef,\n} from '@angular/core';\n\nimport { PopoverDirective } from './popover.directive';\nimport { PopoverService } from '../services/popover.service';\nimport { PopoverTrigger, PopoverType } from '../popover.interface';\n\n@Directive({\n  selector: '[poppyTooltip]',\n})\nexport class TooltipDirective extends PopoverDirective implements OnInit {\n  @Input() poppyTooltip: string | TemplateRef<any>;\n\n  trigger: PopoverTrigger = 'hover';\n  type: PopoverType = 'tooltip';\n\n  constructor(\n    protected readonly componentFactoryResolver: ComponentFactoryResolver,\n    protected readonly popoverService: PopoverService,\n    public readonly hostElement: ElementRef,\n    protected readonly ngZone: NgZone\n  ) {\n    super(componentFactoryResolver, popoverService, hostElement, ngZone);\n  }\n\n  ngOnInit(): void {\n    this.poppyPopover = this.poppyTooltip;\n  }\n}\n","  <div class=\"poppy-select\" [poppyMenu]=\"menu\" [closeOnClickItem]=\"!multiselect\">\n    <div class=\"poppy-select__content\">\n      <div *ngIf=\"multiselect\" class=\"poppy-select__multiselect\">\n        <div *ngFor=\"let chip of displayedChips\" class=\"poppy-select__chip\">\n          <ng-container *ngIf=\"chipTemplate\">\n            <ng-container\n              [ngTemplateOutlet]=\"chipTemplate.template\"\n              [ngTemplateOutletContext]=\"{ $implicit: chip }\"\n            ></ng-container>\n          </ng-container>\n          <div *ngIf=\"!chipTemplate\" class=\"poppy-chip\">\n            <div class=\"poppy-chip__content\">{{ getDisplayLabel(chip) }}</div>\n            <div class=\"poppy-chip__close\" (click)=\"closeChip(chip, $event)\">\n              &#10006;\n            </div>\n          </div>\n        </div>\n        <span class=\"poppy-select__placeholder\" *ngIf=\"!selectedOptions.length\">{{ placeholder }}</span>\n      </div>\n\n      <input\n        #input\n        [hidden]=\"multiselect\"\n        [placeholder]=\"placeholder\"\n        [value]=\"getDisplayValue()\"\n        [readOnly]=\"!searchable\"\n        type=\"text\"\n      />\n\n      <div *ngIf=\"clearable && !multiselect && !!getDisplayValue()\" class=\"poppy-select__clear\">\n        <button class=\"clear-btn\" (click)=\"clear($event)\">&times;</button>\n      </div>\n\n      <div *ngIf=\"!asyncLoading\" class=\"poppy-select__arrow\">\n<!--        <span *ngIf=\"isMenuOpen\" class=\"material-icons\">-->\n<!--          keyboard_arrow_up-->\n<!--        </span>-->\n<!--        <span *ngIf=\"!isMenuOpen\" class=\"material-icons\">-->\n<!--          keyboard_arrow_down-->\n<!--        </span>-->\n      </div>\n\n      <ng-container *ngIf=\"asyncLoading\">\n        <div class=\"poppy-select__loader\">\n          loader..\n        </div>\n      </ng-container>\n    </div>\n  </div>\n\n<poppy-menu #menu=\"poppyMenu\">\n  <li\n    *ngFor=\"let option of displayedOptions\"\n    poppy-menu-item\n    [hidden]=\"option.hidden\"\n    [selected]=\"option.selected\"\n    (clicked)=\"onClickItem(option)\"\n  >\n    <ng-container *ngIf=\"optionTemplate\">\n      <ng-container\n        [ngTemplateOutlet]=\"optionTemplate.template\"\n        [ngTemplateOutletContext]=\"{ $implicit: option }\"\n      ></ng-container>\n    </ng-container>\n    <ng-container *ngIf=\"!optionTemplate\">\n      {{ getDisplayLabel(option) }}\n    </ng-container>\n  </li>\n  <div class=\"poppy__no-items\" *ngIf=\"noItemsFound\">{{ notFoundText }}</div>\n</poppy-menu>\n","import {\n  Component,\n  OnInit,\n  ViewEncapsulation,\n  forwardRef,\n  Input,\n  ViewChild,\n  ElementRef,\n  ChangeDetectorRef,\n  ContentChild,\n  OnDestroy,\n  ChangeDetectionStrategy,\n  Output,\n  EventEmitter,\n  OnChanges,\n  SimpleChanges,\n  AfterViewInit,\n  Optional,\n  Host,\n  SkipSelf,\n} from '@angular/core';\nimport { NG_VALUE_ACCESSOR, ControlValueAccessor, ControlContainer, NG_VALIDATORS } from '@angular/forms';\nimport { debounceTime, map, take, takeUntil, tap } from 'rxjs/operators';\nimport { fromEvent, Observable, Subject } from 'rxjs';\n\nimport { SelectOption, DisplayedSelectOption } from './popover-select.interface';\nimport { PopoverChipDirective, PopoverMenuDirective, PopoverOptionDirective } from '../../directives';\n\n@Component({\n  // tslint:disable-next-line:component-selector\n  selector: 'poppy-select',\n  templateUrl: './popover-select.component.html',\n  styleUrls: ['./popover-select.component.scss'],\n  encapsulation: ViewEncapsulation.None,\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => PopoverSelectComponent),\n      multi: true,\n    },\n    {\n      provide: NG_VALIDATORS,\n      useExisting: forwardRef(() => PopoverSelectComponent),\n      multi: true,\n    },\n  ],\n})\nexport class PopoverSelectComponent implements OnInit, OnChanges, OnDestroy, AfterViewInit, ControlValueAccessor {\n  @Input() options: SelectOption[] = [];\n  @Input() async: (searchPhrase?: string) => Observable<any>;\n  @Input() value: any;\n  @Input() bindLabel: string = 'label';\n  @Input() bindValue: string;\n  @Input() multiselect: boolean = false;\n  @Input() clearable: boolean = true;\n  @Input() searchable: boolean = true;\n  @Input() placeholder: string = 'Wybierz..';\n  @Input() notFoundText: string = 'Nie znaleziono wyników';\n\n  @Output() changed: EventEmitter<any> = new EventEmitter<any>();\n\n  @ViewChild('input') inputEl: ElementRef;\n  @ViewChild(PopoverMenuDirective) menuRef: PopoverMenuDirective;\n  @ContentChild(PopoverChipDirective) chipTemplate: PopoverChipDirective;\n  @ContentChild(PopoverOptionDirective) optionTemplate: PopoverOptionDirective;\n\n  selectedOptions: SelectOption[] = [];\n  displayedOptions: DisplayedSelectOption[] = [];\n  displayedChips: SelectOption[] = [];\n  asyncLoading: boolean = false;\n  isMenuOpen: boolean = false;\n  private destroy$ = new Subject();\n\n  constructor(\n    private cdr: ChangeDetectorRef,\n    @Optional()\n    @Host()\n    @SkipSelf()\n    private controlContainer: ControlContainer\n  ) {}\n\n  ngOnInit(): void {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.options && changes.options.previousValue !== changes.options.currentValue) {\n      this.onOptionsChange();\n    }\n\n    if (changes.value && changes.value.previousValue !== changes.value.currentValue) {\n      this.writeValue(this.value);\n    }\n  }\n\n  ngAfterViewInit(): void {\n    this.menuRef.afterClose.pipe(takeUntil(this.destroy$)).subscribe(() => {\n      this.isMenuOpen = false;\n      if (!this.multiselect) {\n        this.onCloseMenu();\n      }\n      this.cdr.detectChanges();\n    });\n\n    this.menuRef.afterShow.pipe(takeUntil(this.destroy$)).subscribe(() => {\n      this.isMenuOpen = true;\n      this.cdr.detectChanges();\n    });\n\n    this.menuRef.afterClose.pipe(take(1)).subscribe(() => {\n      // TODO: mark as touched..\n      // if (this.control) {\n      //   this.control.markAsTouched();\n      //   this.control.updateValueAndValidity();\n      // }\n    });\n\n    if (this.async) {\n      this.loadAsyncOptions(null, { firstLoad: true });\n    }\n\n    if (this.searchable) {\n      this.onInputKeyUp();\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n\n  get noItemsFound(): boolean {\n    return !this.displayedOptions.length || !!this.displayedOptions.every((opt) => opt.hidden);\n  }\n\n  writeValue(value: any): void {\n    if (value !== undefined) {\n      if (this.multiselect) {\n        this.updateSelectedItemsForMultiSelection(value);\n      } else {\n        this.updateSelectedItemsForSingleSelection(value);\n      }\n    } else {\n      this.reset();\n    }\n\n    setTimeout(() => {\n      this.cdr.detectChanges();\n    });\n  }\n\n  registerOnChange(fn: any): void {\n    this.propagateChange = fn;\n  }\n\n  registerOnTouched(): void {}\n\n  setDisabledState(isDisabled: boolean): void {}\n\n  propagateChange = (value) => {};\n\n  getDisplayLabel(option: SelectOption): string {\n    return this.bindLabel ? option[this.bindLabel] : '';\n  }\n\n  onClickItem(clickedOption: SelectOption): void {\n    this.selectedOptions = [];\n    this.displayedOptions.forEach((option, index) => {\n      if (this.matchByValueOrReference(option, clickedOption)) {\n        this.displayedOptions[index].selected = this.multiselect ? !option.selected : true;\n        this.displayedOptions[index].hidden = this.multiselect ? !option.hidden : false;\n      } else {\n        if (!this.multiselect) {\n          this.displayedOptions[index].selected = false;\n        }\n      }\n      if (this.displayedOptions[index].selected) {\n        this.selectedOptions.push(this.options[index]);\n      }\n    });\n\n    if (this.multiselect) {\n      this.updateDisplayedChips();\n    }\n\n    if (!this.multiselect) {\n      this.inputEl.nativeElement.value = this.bindLabel ? this.selectedOptions[0][this.bindLabel] : '';\n    }\n\n    this.emitChange();\n    this.cdr.detectChanges();\n  }\n\n  onChangeInput(target: EventTarget): void {\n    const value = (target as HTMLInputElement).value;\n\n    if (this.bindLabel) {\n      if (this.async) {\n        this.loadAsyncOptions(value);\n      } else {\n        this.displayedOptions.forEach((option, index) => {\n          this.displayedOptions[index].hidden = !option[this.bindLabel].includes(value);\n        });\n        this.cdr.detectChanges();\n      }\n    }\n  }\n\n  clear(event: Event): void {\n    event.stopPropagation();\n    this.reset();\n    this.emitChange();\n  }\n\n  getDisplayValue(): string {\n    if (!!this.selectedOptions.length) {\n      if (this.multiselect) {\n        return '';\n      }\n      if (typeof this.selectedOptions[0] === 'object' && this.bindLabel) {\n        return this.selectedOptions[0][this.bindLabel];\n      }\n      return '';\n    }\n    return '';\n  }\n\n  closeChip(chip: SelectOption, event: Event): void {\n    this.selectedOptions = [];\n    this.displayedOptions.forEach((option, index) => {\n      if (this.matchByValueOrReference(option, chip)) {\n        this.displayedOptions[index].selected = false;\n        this.displayedOptions[index].hidden = false;\n      }\n      if (this.displayedOptions[index].selected) {\n        this.selectedOptions.push(this.options[index]);\n      }\n    });\n\n    this.updateDisplayedChips();\n    this.emitChange();\n\n    if (event) {\n      event.stopPropagation();\n    }\n\n    this.cdr.detectChanges();\n  }\n\n  private onOptionsChange(): void {\n    this.displayedOptions = [...this.options].map((option) => ({\n      ...option,\n      selected: false,\n      hidden: false,\n    }));\n  }\n\n  private onInputKeyUp(): void {\n    fromEvent(this.inputEl.nativeElement, 'keyup')\n      .pipe(\n        tap(() => {\n          if (this.async) {\n            this.asyncLoading = true;\n          }\n        }),\n        debounceTime(!!this.async ? 500 : 0),\n        map((event: Event) => event.target),\n        takeUntil(this.destroy$)\n      )\n      .subscribe((target) => {\n        this.onChangeInput(target);\n      });\n  }\n\n  private reset(): void {\n    this.displayedOptions.forEach((option, index) => {\n      this.displayedOptions[index].hidden = false;\n      this.displayedOptions[index].selected = false;\n    });\n    this.selectedOptions = [];\n    if (this.multiselect) {\n      this.displayedChips = [];\n    }\n  }\n\n  private emitChange(): void {\n    const value = this.getPropagateValue();\n    this.propagateChange(value);\n    this.changed.emit(value);\n  }\n\n  private getPropagateValue(): any | any[] {\n    if (!this.selectedOptions.length) {\n      return this.multiselect ? [] : null;\n    }\n    if (this.multiselect) {\n      return this.bindValue\n        ? this.selectedOptions.map((option) => option[this.bindValue])\n        : this.selectedOptions;\n    }\n    return this.bindValue ? this.selectedOptions[0][this.bindValue] : this.selectedOptions[0];\n  }\n\n  private onCloseMenu(): void {\n    this.inputEl.nativeElement.value = !!this.selectedOptions.length\n      ? this.selectedOptions[0][this.bindLabel]\n      : null;\n    this.displayedOptions.forEach((option, index) => {\n      this.displayedOptions[index].hidden = false;\n    });\n  }\n\n  private loadAsyncOptions(searchPhrase?: string, options: { firstLoad?: boolean } = {}): void {\n    this.asyncLoading = !options.firstLoad;\n    this.async(searchPhrase).subscribe((results) => {\n      this.options = results;\n      this.onOptionsChange();\n      this.asyncLoading = false;\n      this.cdr.detectChanges();\n    });\n  }\n\n  private updateSelectedItemsForMultiSelection(value: SelectOption[]): void {\n    if (!Array.isArray(value)) {\n      if (value !== null) {\n        throw Error('Initial value for multiselect must be an array!');\n      } else {\n        value = [];\n      }\n    }\n\n    this.selectedOptions = [];\n    this.displayedChips = [];\n    this.options.forEach((option, index) => {\n      const matchOption = !!value.find((v) => this.matchByValueOrReference(option, v));\n\n      if (matchOption) {\n        this.selectedOptions.push(option);\n        this.displayedOptions[index].selected = true;\n        this.displayedOptions[index].hidden = true;\n      } else {\n        this.displayedOptions[index].selected = false;\n        this.displayedOptions[index].hidden = false;\n      }\n    });\n\n    this.updateDisplayedChips();\n  }\n\n  private updateSelectedItemsForSingleSelection(value: any): void {\n    this.options.forEach((option, index) => {\n      if (this.matchByValueOrReference(option, value)) {\n        this.selectedOptions = [option];\n        this.displayedOptions[index].selected = true;\n      } else {\n        this.displayedOptions[index].selected = false;\n      }\n    });\n\n    if (!value) {\n      this.selectedOptions = [];\n    }\n  }\n\n  private updateDisplayedChips(): void {\n    this.displayedOptions\n      .filter((option) => option.selected)\n      .forEach((option) => {\n        const chipIndex = this.displayedChips.findIndex((chip) => this.matchByValueOrReference(chip, option));\n        if (chipIndex === -1) {\n          this.displayedChips.push(option);\n        }\n      });\n    this.displayedChips.forEach((chip, index) => {\n      const option = this.displayedOptions\n        .filter((opt) => opt.selected)\n        .find((opt) => this.matchByValueOrReference(chip, opt));\n      if (!option) {\n        this.displayedChips.splice(index, 1);\n      }\n    });\n\n    if (this.menuRef) {\n      setTimeout(() => {\n        this.menuRef.updateContentPosition();\n      });\n    }\n  }\n\n  private matchByValueOrReference(item: SelectOption, comparedTo: SelectOption): boolean {\n    if (this.bindValue) {\n      if (comparedTo && comparedTo[this.bindValue] !== undefined) {\n        // tslint:disable-next-line:triple-equals\n        return item[this.bindValue] == comparedTo[this.bindValue];\n      }\n      // tslint:disable-next-line:triple-equals\n      return item[this.bindValue] == comparedTo;\n    }\n\n    return item === comparedTo;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { PopoverContentComponent } from './components/popover-content/popover-content.component';\nimport { LayerModule } from '../layer/layer.module';\nimport { PopoverMenuComponent } from './components/popover-menu/popover-menu.component';\nimport { PopoverSelectComponent } from './components/popover-select/popover-select.component';\nimport {\n  TooltipDirective,\n  PopoverDirective,\n  PopoverChipDirective,\n  PopoverChipRemoveDirective,\n  PopoverMenuDirective,\n  PopoverMenuItemDirective,\n  PopoverOptionDirective,\n  PopoverRemoveOnClickDirective,\n} from './directives';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\n\n@NgModule({\n  declarations: [\n    PopoverDirective,\n    PopoverMenuDirective,\n    PopoverContentComponent,\n    PopoverMenuItemDirective,\n    PopoverMenuComponent,\n    PopoverSelectComponent,\n    PopoverChipDirective,\n    PopoverChipRemoveDirective,\n    PopoverRemoveOnClickDirective,\n    PopoverOptionDirective,\n    TooltipDirective,\n  ],\n  imports: [CommonModule, BrowserAnimationsModule, LayerModule],\n  exports: [\n    PopoverDirective,\n    PopoverMenuDirective,\n    PopoverMenuItemDirective,\n    PopoverMenuComponent,\n    PopoverSelectComponent,\n    PopoverChipDirective,\n    PopoverChipRemoveDirective,\n    PopoverRemoveOnClickDirective,\n    PopoverOptionDirective,\n    TooltipDirective,\n  ],\n})\nexport class PopoverModule {}\n"]}